<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Robolectric</title>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-58882116-1"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
    <link href="../images/favicon.ico" rel="icon" type="image/ico" />
    <link href="../stylesheets/application-4badc936.css" rel="stylesheet" type="text/css" />
    <script src="../javascripts/application-da39a3ee.js" type="text/javascript"></script>
</head>

<body>
    <div id="wrapper">
        <div id="sidebar">
            <a href="/"><img class="logo" src="../images/robolectric-stacked-3f7ad42c.png" /></a>
<ul class='nav nav-stacked'><li class='nav-header'>Setup</li><li class='nav-item'><a href='/getting-started/'>Getting Started</a></li><li class='nav-item'><a href='/writing-a-test/'>Writing Your First Test</a></li></ul><ul class='nav nav-stacked'><li class='nav-header'>User Guide</li><li class='nav-item'><a href='/configuring/'>Configuring Robolectric</a></li><li class='nav-item'><a href='/activity-lifecycle/'>Driving the Activity Lifecycle</a></li><li class='nav-item'><a href='/using-add-on-modules/'>Using Add-On Modules</a></li><li class='nav-item'><a href='/using-libraries/'>Using Library Resources</a></li><li class='nav-item'><a href='/using-qualifiers/'>Using Qualified Resources</a></li></ul><ul class='nav nav-stacked'><li class='nav-header'>Customizing</li><li class='nav-item'><a href='/extending/'>Extending Robolectric</a></li><li class='nav-item'><a href='/custom-shadows/'>Creating Custom Shadows</a></li><li class='nav-item'><a href='/custom-test-runner/'>Customizing the Test Runner</a></li></ul><ul class='nav nav-stacked'><li class='nav-header'>Contributing</li><li class='nav-item'><a href='/contributing/'>Contributor Guidelines</a></li></ul>

            <ul class="nav nav-stacked">
    <li class="nav-header">Resources</li>
    <li class="nav-item">
        <a href='http://groups.google.com/group/robolectric'>Mailing List</a>
    </li>
    <li class="nav-item">
        <a href='/javadoc/2.4/index.html'>Robolectric 2.4 Javadocs</a>
    </li>
    <li class="nav-item">
        <a href='/javadoc/3.0/index.html'>Robolectric 3.0 Javadocs</a>
    </li>
    <li class="nav-item">
        <a href='/javadoc/3.1/index.html'>Robolectric 3.1 Javadocs</a>
    </li>
</ul>

        </div>

        <div id="content">
            <h1>Configuring Robolectric</h1>

<p>There are numerous ways to customize how Robolectric behaves at runtime.</p>

<h2>Config Annotation</h2>

<p>The primary way to customize Robolectric is done via the <code>@Config</code> annotation. The annotation can be applied to classes and methods, with the values specified at the method level overriding the values specified at the class level.</p>

<p>Base classes are also searched for annotations, so if you find yourself specifying the same values on a large number of tests, you can create a base class and move your <code>@Config</code> annotation to that class.</p>

<p>The following examples show how to handle common setup tasks:</p>

<h3>Configure SDK Level</h3>

<p>Robolectric will run your code against the <code>targetSdkVersion</code> specified in your manifest. If you want to test how specific pieces of code behave under a different SDK level, you can change the sdk version by setting:</p>
<pre class="highlight plaintext">@Config(sdk = Build.VERSION_CODES.JELLY_BEAN)
public class SandwichTest {

    @Config(sdk = Build.VERSION_CODES.KITKAT)
    public void getSandwich_shouldReturnHamSandwich() {
    }
}
</pre>
<h3>Configure Application Class</h3>

<p>Robolectric will attempt to create an instance of your Application class as specified in the manifest. If you want to provide a custom implementation, you can specify it by setting:</p>
<pre class="highlight plaintext">@Config(application = CustomApplication.class)
public class SandwichTest {

    @Config(application = CustomApplicationOverride.class)
    public void getSandwich_shouldReturnHamSandwich() {
    }
}
</pre>
<h3>Configure Resource Paths</h3>

<p>Robolectric provides defaults for Gradle and Maven, but allows you to customize the path to your manifest, resource directory, and assets directory. This can be useful if you have a custom build system. You can specify these values by setting:</p>
<pre class="highlight plaintext">@Config(manifest = "some/build/path/AndroidManifest.xml")
public class SandwichTest {

    @Config(manifest = "other/build/path/AndroidManifest.xml")
    public void getSandwich_shouldReturnHamSandwich() {
    }
}
</pre>
<p>By default, Robolectric will assume that your resources and assets are located in directories named <code>res</code> and <code>assets</code>, respectively. These paths are assumed to be relative to the directory where the manifest is located. You can change these values by adding the <code>resourceDir</code> and <code>assetDir</code> options to the <code>@Config</code> annotaton.</p>

<h2>Config Properties</h2>

<p>Any option that can be specified in a <code>@Config</code> annotation can also be specified globally in a properties file. Create a file named <code>robolectric.properties</code> and make sure it can be found on the classpath. Below is an example:</p>
<pre class="highlight plaintext">sdk=18
manifest=some/build/path/AndroidManifest.xml
shadows=my.package.ShadowFoo,my.package.ShadowBar
</pre>
<h2>System Properties</h2>

<p>Some options can be configured globally by setting these system properties:</p>

<ul>
<li><strong>robolectric.offline</strong> - Set to true to disable runtime fetching of jars.</li>
<li><strong>robolectric.dependency.dir</strong> - When in offline mode, specifies a folder containing runtime dependencies.</li>
<li><strong>robolectric.dependency.repo.id</strong> - Set the ID of the Maven repository to use for the runtime dependencies (default <code>sonatype</code>).</li>
<li><strong>robolectric.dependency.repo.url</strong> - Set the URL of the Maven repository to use for the runtime dependencies (default <code>https://oss.sonatype.org/content/groups/public/</code>).</li>
<li><strong>robolectric.logging.enabled</strong> - Set to true to enable debug logging.</li>
</ul>

<p>When using Gradle, you can configure the System Properties for unit tests with the <code>all</code> block (see <a href="http://tools.android.com/tech-docs/unit-testing-support">here</a>). For example, to override the Maven repository URL and ID to download the runtime dependencies from a repository other than Sonatype:</p>
<pre class="highlight plaintext">android {
  testOptions {
    unitTests.all {
      systemProperty 'robolectric.dependency.repo.url', 'https://local-mirror/repo'
      systemProperty 'robolectric.dependency.repo.id', 'local'
    }
  }
}
</pre>
        </div>
    </div>
</body>
</html>